(this.webpackJsonpui = this.webpackJsonpui || []).push([[0], { 180: function (e, t, n) {}, 182: function (e, t, n) {}, 183: function (e, t, n) {}, 279: function (e, t, n) {}, 280: function (e, t, n) {}, 281: function (e, t, n) {}, 282: function (e, t, n) {}, 283: function (e, t, n) {}, 284: function (e, t, n) {}, 285: function (e, t, n) {}, 286: function (e, t, n) { 'use strict'; n.r(t); const a = n(0); const c = n.n(a); const r = n(53); const s = n.n(r); const o = (n(180), n(181), n(49)); const i = n(31); const u = n(2); const l = n(292); const j = n(171); const b = n(297); const p = (n(182), n(54)); const d = (n(183), n(8)); const f = function (e) { const t = e.name; const n = e.url; const a = e.color; return Object(d.jsx)(p.a, { id: 'button-link', style: { backgroundColor: a || '#1995ad' }, children: Object(d.jsx)(o.b, { to: n, children: t }) }) }; const O = function () { const e = Object(i.f)(); const t = Object(a.useState)(); const n = Object(u.a)(t, 2); const c = n[0]; const r = n[1]; const s = Object(a.useState)(); const p = Object(u.a)(s, 2); const O = p[0]; const h = p[1]; Object(a.useEffect)(function () { setInterval(function () { h(JSON.parse(localStorage.getItem('user')) || null), r(JSON.parse(localStorage.getItem('customUser')) || null) }, 1e3) }); const m = function () { e.push('/') }; return Object(d.jsxs)(l.a, { children: [Object(d.jsxs)('div', { id: 'user-info', children: [c ? Object(d.jsx)(j.a, { size: 'large', src: ''.concat('http://127.0.0.1:8000/api').concat(c.photo), onClick: m }) : Object(d.jsx)(j.a, { size: 'large', icon: Object(d.jsx)(b.a, {}), onClick: m }), (c === null || void 0 === c ? void 0 : c.first_name) ? Object(d.jsx)('div', { children: Object(d.jsx)(o.b, { to: '/profile', children: c.first_name }) }) : Object(d.jsx)('div', { children: Object(d.jsx)(o.b, { to: '/login', children: 'Log in' }) })] }), c && Object(d.jsxs)('div', { id: 'relations', children: [Object(d.jsx)(f, { name: 'Subscriptions', url: '/subscriptions/'.concat(c.user) }), Object(d.jsx)(f, { name: 'Followers', url: '/followers/'.concat(c.user) }), O && Object(d.jsx)('div', { id: 'logout', onClick: function () { localStorage.removeItem('user'), localStorage.removeItem('customUser'), m() }, children: 'Log out' })] })] }) }; const h = n(18); const m = n.n(h); const x = n(27); const v = n(34); const g = n.n(v); const w = (n(279), n(291)); const S = w.a.Meta; const y = function (e) { const t = e.user; return Object(d.jsx)(w.a, { style: { width: 300 }, children: Object(d.jsx)(o.b, { to: '/user/'.concat(t.user), children: Object(d.jsx)(S, { avatar: Object(d.jsx)(j.a, { src: ''.concat('http://127.0.0.1:8000').concat(t.photo), size: 'large' }), title: t.first_name, description: t.description }) }) }) }; const I = function () { const e = Object(a.useState)([]); const t = Object(u.a)(e, 2); const n = t[0]; const c = t[1]; return Object(a.useEffect)(function () { const e = JSON.parse(localStorage.getItem('user')) || null; (function () { const t = Object(x.a)(m.a.mark(function t () { let n, a; return m.a.wrap(function (t) { for (;;) switch (t.prev = t.next) { case 0:return t.next = 2, g.a.get(''.concat('http://127.0.0.1:8000/api', '/users/')); case 2:n = t.sent, a = n.data, c(e ? a.filter(function (t) { return t.user !== e.id }) : a); case 5:case 'end':return t.stop() } }, t) })); return function () { return t.apply(this, arguments) } })()().catch(function (e) { return console.log(e) }) }, []), Object(d.jsx)('div', { id: 'users', children: n === null || void 0 === n ? void 0 : n.map(function (e) { return Object(d.jsx)(y, { user: e }, e.id) }) }) }; const C = n(290); const k = n(296); const N = (n(280), n(73)); const J = function () { const e = Object(a.useState)(''); const t = Object(u.a)(e, 2); const n = t[0]; const c = t[1]; const r = Object(a.useState)(''); const s = Object(u.a)(r, 2); const l = s[0]; const j = s[1]; const b = Object(a.useState)(); const f = Object(u.a)(b, 2); const O = f[0]; const h = f[1]; const v = Object(i.f)(); Object(a.useEffect)(function () { h(JSON.parse(localStorage.getItem('user')) || null) }, []), Object(a.useEffect)(function () { O && v.push('/') }, [v, O]); const w = (function () { const e = Object(x.a)(m.a.mark(function e () { let t, a, c, r, s; return m.a.wrap(function (e) { for (;;) switch (e.prev = e.next) { case 0:return t = { headers: { 'Content-type': 'application/json' } }, e.prev = 1, e.next = 4, g.a.post(''.concat('http://127.0.0.1:8000/api', '/login/'), { username: n, password: l }, t); case 4:return a = e.sent, c = a.data, localStorage.setItem('user', JSON.stringify(c)), h(c), e.next = 10, g.a.get(''.concat('http://127.0.0.1:8000/api', '/custom-user/').concat(c.id, '/')); case 10:r = e.sent, s = r.data, localStorage.setItem('customUser', JSON.stringify(s)), e.next = 18; break; case 15:e.prev = 15, e.t0 = e.catch(1), N.a.error({ title: 'Something went wrong', content: e.t0.response.data.detail }); case 18:case 'end':return e.stop() } }, e, null, [[1, 15]]) })); return function () { return e.apply(this, arguments) } }()); return Object(d.jsxs)('div', { className: 'login', children: [Object(d.jsxs)(C.a, { name: 'basic', labelCol: { span: 8 }, wrapperCol: { span: 16 }, initialValues: { remember: !0 }, onFinish: w, autoComplete: 'off', children: [Object(d.jsx)(C.a.Item, { label: 'Username', name: 'username', rules: [{ required: !0, message: 'Please input your username!' }], onChange: function (e) { return c(e.target.value) }, children: Object(d.jsx)(k.a, {}) }), Object(d.jsx)(C.a.Item, { label: 'Password', name: 'password', rules: [{ required: !0, message: 'Please input your password!' }], onChange: function (e) { return j(e.target.value) }, children: Object(d.jsx)(k.a.Password, {}) }), Object(d.jsx)(C.a.Item, { wrapperCol: { offset: 8, span: 16 }, children: Object(d.jsx)(p.a, { type: 'primary', htmlType: 'submit', children: 'Submit' }) })] }), Object(d.jsx)(o.b, { to: '/register', children: 'Are you a new user? Register here' })] }) }; const E = (n(281), function (e) { const t = e.match; const n = Object(a.useState)([]); const c = Object(u.a)(n, 2); const r = c[0]; const s = c[1]; const o = t.params.id; return Object(a.useEffect)(function () { let e = !1; return (function () { const t = Object(x.a)(m.a.mark(function t () { let n, a; return m.a.wrap(function (t) { for (;;) switch (t.prev = t.next) { case 0:return t.next = 2, g.a.get(''.concat('http://127.0.0.1:8000/api', '/subscriptions/').concat(o, '/')); case 2:n = t.sent, a = n.data, e || s(a); case 5:case 'end':return t.stop() } }, t) })); return function () { return t.apply(this, arguments) } }())().catch(function (e) { return console.log(e) }), function () { return e = !0 } }, [o]), Object(d.jsx)('div', { id: 'subscriptions', children: r === null || void 0 === r ? void 0 : r.map(function (e) { return Object(d.jsx)(y, { user: e }, e.id) }) }) }); const U = (n(282), function (e) { const t = e.match; const n = Object(a.useState)([]); const c = Object(u.a)(n, 2); const r = c[0]; const s = c[1]; const o = t.params.id; return Object(a.useEffect)(function () { let e = !1; return (function () { const t = Object(x.a)(m.a.mark(function t () { let n, a; return m.a.wrap(function (t) { for (;;) switch (t.prev = t.next) { case 0:return t.next = 2, g.a.get(''.concat('http://127.0.0.1:8000/api', '/followers/').concat(o, '/')); case 2:n = t.sent, a = n.data, e || s(a); case 5:case 'end':return t.stop() } }, t) })); return function () { return t.apply(this, arguments) } }())().catch(function (e) { return console.log(e) }), function () { return e = !0 } }, [o]), Object(d.jsx)('div', { id: 'followers', children: r === null || void 0 === r ? void 0 : r.map(function (e) { return Object(d.jsx)(y, { user: e }, e.id) }) }) }); const P = n(293); const V = (n(283), function (e) { const t = e.url; return Object(d.jsx)(P.a, { className: 'user-image', height: 250, width: 300, src: ''.concat('http://127.0.0.1:8000/api').concat(t) }) }); const _ = (n(284), function (e, t) { return t.followers.includes(e) }); const z = function (e, t) { return t.subscriptions.includes(e) }; const F = function (e) { const t = e.match; const n = JSON.parse(localStorage.getItem('user')); const c = JSON.parse(localStorage.getItem('customUser')); const r = Object(a.useState)(); const s = Object(u.a)(r, 2); const o = s[0]; const i = s[1]; const l = t.params.id; const j = Object(a.useState)(!1); const b = Object(u.a)(j, 2); const O = b[0]; const h = b[1]; const v = Object(a.useState)(!1); const w = Object(u.a)(v, 2); const S = w[0]; const y = w[1]; Object(a.useEffect)(Object(x.a)(m.a.mark(function e () { let t; return m.a.wrap(function (e) { for (;;) switch (e.prev = e.next) { case 0:return t = !1, (function () { const e = Object(x.a)(m.a.mark(function e () { let n, a; return m.a.wrap(function (e) { for (;;) switch (e.prev = e.next) { case 0:return e.next = 2, g.a.get(''.concat('http://127.0.0.1:8000/api', '/user/').concat(l, '/')); case 2:n = e.sent, a = n.data, h(_(c === null || void 0 === c ? void 0 : c.id, a)), y(z(c === null || void 0 === c ? void 0 : c.id, a)), t || i(a); case 7:case 'end':return e.stop() } }, e) })); return function () { return e.apply(this, arguments) } }())().catch(function (e) { return console.log(e) }), e.abrupt('return', function () { return t = !0 }); case 4:case 'end':return e.stop() } }, e) })), [l, O]); const I = (function () { const e = Object(x.a)(m.a.mark(function e () { let t, a, r; return m.a.wrap(function (e) { for (;;) switch (e.prev = e.next) { case 0:return t = { headers: { Authorization: 'Bearer '.concat(n.token) } }, e.next = 3, g.a.post(''.concat('http://127.0.0.1:8000/api', '/update-relationship/').concat(l, '/'), {}, t); case 3:a = e.sent, r = a.data, h(function () { return _(c.id, r) }); case 6:case 'end':return e.stop() } }, e) })); return function () { return e.apply(this, arguments) } }()); return Object(d.jsx)('div', { className: 'info', children: o && Object(d.jsxs)('div', { id: 'main-info', children: [Object(d.jsx)(V, { url: o.photo }), Object(d.jsxs)('div', { id: 'important', children: [Object(d.jsxs)('div', { id: 'subscriptions-followers', children: [Object(d.jsx)('div', { children: o.first_name }), Object(d.jsxs)('div', { children: [Object(d.jsx)(f, { name: ''.concat(o.first_name, "'s subscriptions"), url: '/subscriptions/'.concat(o.user), color: '#a7a8ae' }), Object(d.jsx)(f, { name: ''.concat(o.first_name, "'s followers"), url: '/followers/'.concat(o.user), color: '#a7a8ae' })] })] }), Object(d.jsx)('div', { id: 'location', children: o.location }), O && S && Object(d.jsx)('div', { children: o.contact }), Object(d.jsx)('div', { children: o.description }), o.id !== c.id && (O && !0 === O ? Object(d.jsx)('div', { className: 'subscribe', children: Object(d.jsx)(p.a, { onClick: I, children: 'Unsubscribe' }) }) : Object(d.jsx)('div', { className: 'subscribe', children: Object(d.jsx)(p.a, { onClick: I, children: 'Subscribe' }) }))] })] }) }) }; const q = n(295); const B = n(289); const M = n(294); const A = n(120); const L = function () { const e = Object(a.useState)(); const t = Object(u.a)(e, 2); const n = t[0]; const c = t[1]; const r = Object(a.useState)(); const s = Object(u.a)(r, 2); const o = s[0]; const i = s[1]; Object(a.useEffect)(function () { i(JSON.parse(localStorage.getItem('user')) || null) }, []), Object(a.useEffect)(function () { o && (function () { const e = Object(x.a)(m.a.mark(function e () { let t, n; return m.a.wrap(function (e) { for (;;) switch (e.prev = e.next) { case 0:return e.next = 2, g.a.get(''.concat('http://127.0.0.1:8000/api', '/custom-user/').concat(o.id, '/')); case 2:t = e.sent, n = t.data, c(n); case 5:case 'end':return e.stop() } }, e) })); return function () { return e.apply(this, arguments) } }())().catch(function (e) { return console.log(e) }) }, [o]); const l = (function () { const e = Object(x.a)(m.a.mark(function e (t) { let n, a, c, r, s, i, u; return m.a.wrap(function (e) { for (;;) switch (e.prev = e.next) { case 0:return n = t.username, a = t.location, c = t.sex, r = t.budget, s = t.description, i = t.contact, u = { headers: { 'Content-type': 'application/json', Authorization: 'Bearer '.concat(o.token) } }, e.prev = 2, e.next = 5, g.a.put(''.concat('http://127.0.0.1:8000/api', '/profile/update/'), { username: n, location: a, sex: c, budget: r, description: s, contact: i }, u); case 5:N.a.success({ content: 'User info successfully updated' }), e.next = 11; break; case 8:e.prev = 8, e.t0 = e.catch(2), N.a.error({ title: 'Something went wrong', content: e.t0.response.data.detail }); case 11:case 'end':return e.stop() } }, e, null, [[2, 8]]) })); return function (t) { return e.apply(this, arguments) } }()); return Object(d.jsx)('div', { children: n && Object(d.jsxs)(C.a, { labelCol: { span: 4 }, wrapperCol: { span: 14 }, layout: 'horizontal', initialValues: { size: 'default' }, size: 'default', onFinish: l, children: [Object(d.jsx)(C.a.Item, { label: 'Name', name: 'username', children: Object(d.jsx)(k.a, { defaultValue: n.first_name }) }), Object(d.jsx)(C.a.Item, { label: 'Location', name: 'location', children: Object(d.jsx)(k.a, { defaultValue: n.location }) }), Object(d.jsx)(C.a.Item, { label: 'Sex', name: 'sex', children: Object(d.jsxs)(q.a, { defaultValue: n.sex, children: [Object(d.jsx)(q.a.Option, { value: 'Female', children: 'Female' }), Object(d.jsx)(q.a.Option, { value: 'Male', children: 'Male' }), Object(d.jsx)(q.a.Option, { value: 'Not chosen', children: 'Not chosen' })] }) }), Object(d.jsx)(C.a.Item, { label: 'Contact', name: 'contact', children: Object(d.jsx)(k.a, { defaultValue: n.contact }) }), Object(d.jsx)(C.a.Item, { label: 'Date of birth', name: 'date_of_birth', children: Object(d.jsx)(B.a, {}) }), Object(d.jsx)(C.a.Item, { label: 'Budget', name: 'budget', children: Object(d.jsx)(M.a, { defaultValue: Number(n.budget) }) }), Object(d.jsx)(C.a.Item, { label: 'Description', name: 'description', children: Object(d.jsx)(A.a, { defaultValue: n.description }) }), Object(d.jsx)(C.a.Item, { wrapperCol: { offset: 8, span: 16 }, children: Object(d.jsx)(p.a, { type: 'primary', htmlType: 'submit', children: 'Update' }) })] }) }) }; const T = (n(285), function () { const e = Object(a.useState)(''); const t = Object(u.a)(e, 2); const n = t[0]; const c = t[1]; const r = Object(a.useState)(''); const s = Object(u.a)(r, 2); const o = s[0]; const l = s[1]; const j = Object(a.useState)(''); const b = Object(u.a)(j, 2); const f = b[0]; const O = b[1]; const h = Object(a.useState)(); const v = Object(u.a)(h, 2); const w = v[0]; const S = v[1]; const y = Object(i.f)(); Object(a.useEffect)(function () { S(JSON.parse(localStorage.getItem('user')) || null) }, []), Object(a.useEffect)(function () { w && y.push('/') }, [y, w]); const I = (function () { const e = Object(x.a)(m.a.mark(function e () { let t, a, c, r, s; return m.a.wrap(function (e) { for (;;) switch (e.prev = e.next) { case 0:return t = { headers: { 'Content-type': 'application/json' } }, e.prev = 1, e.next = 4, g.a.post(''.concat('http://127.0.0.1:8000/api', '/register/'), { username: n, email: o, password: f }, t); case 4:return a = e.sent, c = a.data, localStorage.setItem('user', JSON.stringify(c)), S(c), console.log(c), e.next = 11, g.a.get(''.concat('http://127.0.0.1:8000/api', '/custom-user/').concat(c.id, '/')); case 11:r = e.sent, s = r.data, localStorage.setItem('customUser', JSON.stringify(s)), e.next = 19; break; case 16:e.prev = 16, e.t0 = e.catch(1), N.a.error({ title: 'Something went wrong', content: e.t0.response.data.detail }); case 19:case 'end':return e.stop() } }, e, null, [[1, 16]]) })); return function () { return e.apply(this, arguments) } }()); return Object(d.jsx)('div', { className: 'registration', children: Object(d.jsxs)(C.a, { name: 'basic', labelCol: { span: 8 }, wrapperCol: { span: 16 }, initialValues: { remember: !0 }, onFinish: I, autoComplete: 'off', children: [Object(d.jsx)(C.a.Item, { label: 'Username', name: 'username', rules: [{ required: !0, message: 'Please input your username!' }], onChange: function (e) { return c(e.target.value) }, children: Object(d.jsx)(k.a, {}) }), Object(d.jsx)(C.a.Item, { label: 'Email', name: 'email', rules: [{ required: !0, message: 'Please input your email!' }], onChange: function (e) { return l(e.target.value) }, children: Object(d.jsx)(k.a, {}) }), Object(d.jsx)(C.a.Item, { label: 'Password', name: 'password', rules: [{ required: !0, message: 'Please input your password!' }], onChange: function (e) { return O(e.target.value) }, children: Object(d.jsx)(k.a.Password, {}) }), Object(d.jsx)(C.a.Item, { wrapperCol: { offset: 8, span: 16 }, children: Object(d.jsx)(p.a, { type: 'primary', htmlType: 'submit', children: 'Submit' }) })] }) }) }); const D = function () { return Object(d.jsxs)(o.a, { children: [Object(d.jsx)(O, {}), Object(d.jsxs)(i.c, { children: [Object(d.jsx)(i.a, { exact: !0, path: '/', component: I }), Object(d.jsx)(i.a, { path: '/login', component: J }), Object(d.jsx)(i.a, { path: '/register', component: T }), Object(d.jsx)(i.a, { path: '/subscriptions/:id', component: E }), Object(d.jsx)(i.a, { path: '/followers/:id', component: U }), Object(d.jsx)(i.a, { path: '/user/:id', component: F }), Object(d.jsx)(i.a, { path: '/profile/', component: L })] })] }) }; s.a.render(Object(d.jsx)(c.a.StrictMode, { children: Object(d.jsx)(D, {}) }), document.getElementById('root')) } }, [[286, 1, 2]]])
// # sourceMappingURL=main.831edb20.chunk.js.map
